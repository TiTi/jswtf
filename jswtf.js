/*
jswtf
Because someone had to code it.

Author: ROHMER Thibault

Licence: WTFPL - Do What The Fuck You Want To Public License
*/

(function()
{
	var dictionnary = 
	{
		'a': '(![]+[])[+!+[]]',
		'b': '([]+[]+{})[!+[]+!+[]]',
		'c': '([![]]+{})[+!+[]+[+[]]]',
		'd': '([]+[]+[][[]])[!+[]+!+[]]',
		'e': '(!![]+[])[!+[]+!+[]+!+[]]',
		'f': '(![]+[])[+[]]',
		'i': '([![]]+[][[]])[+!+[]+[+[]]]',
		'j': '([]+[]+{})[+!+[]+[+[]]]',
		'l': '(![]+[])[!+[]+!+[]]',
		'N': '(+{}+[]+[])[+[]]',
		'n': '([]+[]+[][[]])[+!+[]]',
		'O': '(![]+[]+[]+[]+{})[+!+[]+[]+[]+(!+[]+!+[]+!+[])]',
		'o': '([]+[]+{})[+!+[]]',
		'r': '(!![]+[])[+!+[]]',
		's': '(![]+[])[!+[]+!+[]+!+[]]',
		't': '(!![]+[])[+[]]',
		'u': '(!![]+[])[!+[]+!+[]]',
		' ': '(+{}+[]+[]+[]+[]+{})[+!+[]+[+[]]]',
		'[': '([]+[]+{})[+[]]',
		']': '([]+[]+{})[+!+[]+[]+[]+(!+[]+!+[]+!+[]+!+[])]'
	};
	
	var packer =
	{
		getConstructor: function(name)
		{
			var constructor = '([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+(!![]+[])[!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([]+[]+{})[+!+[]]+(!![]+[])[+!+[]]';
			return name+'='+constructor+';';
		},
		
		getStart: function(name){return name+'['+name+']['+name+'](';}, // '_[_][_]('
		getEnd: function(){return ')()'}, // ')()'
		
		alertStart: '(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+\'("\'+',
		alertEnd: '+\'")\''
	};
	
	JSWTF = // Global
	{
		GetChar: function(c)
		{
			return dictionnary[c];
		},
		GetCharsList: function()
		{
			var chars = [];
			for(var i in dictionnary)
				chars.push(i);
			return chars;
		},
		Pack: function(s, v) // s = string to pack ; v = variable name to use ('_' by default)
		{
			if(typeof(v) == 'undefined')
				v = '_';
			return packer.getConstructor(v) + packer.getStart(v) + s + packer.getEnd();
		},
		PackAlert: function(s, v)
		{
			s = packer.alertStart + s + packer.alertEnd;
			return JSWTF.Pack(s, v);
		}
	};

})()


/*

HOW?
This is how the dictionnary has been created:
	

First of all the basics:
	
![]					false
!+[]				true
!![]				true
+[]					0
+!+[]				1
+!+{}				1
!+[]+!+[]			2
!+[]+!+[]+!+[]		3

Just add '+!+[]' to increment the number => 4 = !+[]+!+[]+!+[]+!+[]

Let's add some more:

[][[]]				undefined
{}					object
+{}					NaN


Embracing arrays:

console.log( [].toString() ) // ""
console.log( (![]+[].toString()) ) // false + ""


And then we've got strings:

![]+[]				"false"
!![]+[]				"true"
[]+[]+[][[]]		"undefined"
[]+[]				""


Basically we'd like to get individual chars.
With the use of brackets, it is possible to treat a string as a simulated array.

"Hello World"[6] => W

![]+[]		=> "false"
![]+[][1]	=> NaN ; does not work, we have to surround with parentheses
(![]+[])[1]	=> "a"

And that's just how it works for every char in the dictionnary!

Of course multiple combinaisons are often possible to access a specific char, but I tried to keep the smallest ones in the dictionnary.


More strings:

[![]]+[][[]]		[false]+undefined	= "falseundefined"
[]+[]+{}			""+object			= "[object Object]"
[![]]+{}			[false]+object		= "false[object Object]"

10th shortcut:

+!+[]+[+[]]		1+[0] = "10"

We can use the string '10', faster than the number 10:
"falseundefined"[ 10 ] => "i"
"falseundefined"[ "10" ] => "i"
"falseundefined"[ !+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[] ] => "i"
"falseundefined"[ +!+[]+[+[]] ] => "i"

This allows us to access the following chars:

"falseundefined" => i
"[object Object]" => j
"false[object Object]" => c
"NaN[object Object]" => " "

:)

----------------------------



Wrapping this:

http://wtfjs.com/2010/06/09/function-in-ur-string

var _ = "constructor";
_[_][_]("alert('test')")(); // alert('test')

_[_][_](	STRING HERE		)();


(![]+[])[+!+[]]				'a'
(![]+[])[!+[]+!+[]]			'l'
(!![]+[])[!+[]+!+[]+!+[]]	'e'	
(!![]+[])[+!+[]]			'r'
(!![]+[])[+[]]				't'

(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]	'a'+'l'+'e'+'r'+'t' = "alert"


Let's make an alert:

_="constructor"; // First define the var "_", then use it:
_[_][_]((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+"()")(); // alerts undefined \o/


([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]		c
([]+[]+{})[+!+[]]							o
(+{}+[]+[])[+[]]							N
([]+[]+[][[]])[+!+[]]						n
(![]+[])[!+[]+!+[]+!+[]]					s
(!![]+[])[+[]]								t
(!![]+[])[+!+[]]							r
(!![]+[])[!+[]+!+[]]						u
([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]		c
(!![]+[])[+[]]								t
([]+[]+{})[+!+[]]							o
(!![]+[])[+!+[]]							r


([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+(!![]+[])[!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([]+[]+{})[+!+[]]+(!![]+[])[+!+[]]		"constructor"


Testing this:

_=([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+(!![]+[])[!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([]+[]+{})[+!+[]]+(!![]+[])[+!+[]]; // Declare "_" var
_[_][_]((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+'("'+_+'")')();		alerts constructor


_=([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+(!![]+[])[!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([]+[]+{})[+!+[]]+(!![]+[])[+!+[]];
_[_][_]((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+'("'+(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+'!")')();		alerts alert!

([![]]+[][[]])[+!+[]+[+[]]]					i
([]+[]+[][[]])[+!+[]]						n
([]+[]+{})[!+[]+!+[]+!+[]]					j
(!![]+[])[!+[]+!+[]+!+[]]					e
([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]		c
(!![]+[])[+[]]								t
([![]]+[][[]])[+!+[]+[+[]]]					i
([]+[]+{})[+!+[]]							o
([]+[]+[][[]])[+!+[]]						n

([![]]+[][[]])[+!+[]+[+[]]]+([]+[]+[][[]])[+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]		"injection"


One line version:
_=([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+(!![]+[])[!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([]+[]+{})[+!+[]]+(!![]+[])[+!+[]];_[_][_]((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+'("'+([![]]+[][[]])[+!+[]+[+[]]]+([]+[]+[][[]])[+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+([]+[]+{})[!+[]+!+[]+!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+([]+[]+{})[+!+[]]+([]+[]+[][[]])[+!+[]]+'")')()	alerts injection


Got it?

*/